<!doctype html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/head :: head"></head>
<body>
<header th:replace="fragments/menu :: menu(activeMenu)"></header>
<main role="main">
    <div class="wrapper">
        <nav id="sidebar">
            <div class="m-1">
				<button title="Accueil" type="button" onclick="location.href='/'" class="mb-1 col-12 btn btn-transparent text-left">
					<i class="fas fa-home"></i> <span class="sidebar-label">Accueil</span>
				</button>
                <button class="mr-2 btn btn-outline-dark btn-light float-left" onclick="location.href='/manager/form?'">
                    <i class="fa fa-plus"></i> Créer un formulaire nanuellement
                </button>
            </div>
        </nav>
        <div id="content" class="content">
			<nav aria-label="breadcrumb">
				<ol class="breadcrumb">
					<li class="breadcrumb-item active">Liste des formulaires</li>
				</ol>
			</nav>
            <div class="card">
                <div class="card-header">
                    <h2>Formulaires</h2>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover table-striped table-bordered">
                            <thead>
                            <tr>
                                <th scope="col">Nom</th>
                                <th scope="col">Version</th>
                                <th scope="col">Actif</th>
                                <th scope="col">Rôle</th>
                                <th class="show text-center" scope="col">Voir</th>
                                <th class="edit text-center" scope="col">Modifier</th>
                                <th class="delete text-center" scope="col">Supprimer</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr th:each="form : ${forms}">
                                <td th:text="${form.name}"></td>
                                <td th:text="${form.version}"></td>
                                <td>
                                    <i th:if="${form.activeVersion}" class="fa fa-check text-success"></i>
                                    <i th:unless="${form.activeVersion}" class="fa fa-times text-danger"></i>
                                </td>
                                <td th:text="${form.role}"></td>
                                <td class="show text-center"><a type="button"
                                                                th:href="'/manager/' + ${user.eppn} + '/form/' + ${form.id}"
                                                                class="btn btn-primary"><i class="fas fa-eye"></i></a>
                                </td>
                                <td class="edit text-center"><a type="button"
                                                                th:href="'/manager/' + ${user.eppn} + '/form/update/' + ${form.id}"
                                                                class="btn btn-warning"><i
                                        class="fas fa-pencil-alt"></i></a></td>
                                <td class="delete text-center">
                                    <button type="button" data-toggle="modal" data-target="#modal-warning"
                                            th:attr="data-target='#modal-warning'+${form.id }" class="btn btn-danger"><i
                                            class="fas fa-trash"></i></button>
                                    <div class="modal modal-warning fade in" th:id="modal-warning+${form.id}">
                                        <div class="modal-dialog">
                                            <div class="modal-content">
                                                <form id="command"
                                                      th:action="'/manager/' + ${user.eppn} + '/form/' + ${form.id}"
                                                      th:method="delete">
                                                    <div class="modal-header">
                                                        <button type="button" class="close" data-dismiss="modal"
                                                                aria-label="Close">
                                                            <span aria-hidden="true">&times;</span>
                                                        </button>
                                                    </div>
                                                    <div class="modal-body">
                                                        <div class="alert alert-danger text-center">Confirmez-vous la
                                                            suppression ?
                                                        </div>
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-outline pull-left"
                                                                data-dismiss="modal">Non
                                                        </button>
                                                        <button type="submit"
                                                                class="btn btn-outline pull-left btn-danger">
                                                            Oui
                                                        </button>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
	</div>
</main>
<footer th:replace="fragments/footer :: footer"></footer>
</body>
</html>
