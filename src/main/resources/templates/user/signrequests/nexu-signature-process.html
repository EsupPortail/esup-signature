<!doctype html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/head"></head>
<script th:src="${nexuUrl} + '/nexu.js'" ></script>
<script th:inline="javascript" type="module">
	import {Nexu} from "/js/modules/nexu.js";
	let	nexu = new Nexu([[${nexuUrl}]], [[${nexuVersion}]], [[${rootUrl}]], [[${addDate}]], [[${addName}]]);
	nexu.getCertificates();
</script>
<body>
	<nav th:replace="fragments/nav"></nav>
	<div id="ribbon" class="card">
		<div class="card-body">
			<div class="alert alert-primary float-left">
				Signature NexU en cours <br> <small>L'application Nexu
					va s'ouvrir, vous pouvez utiliser un keystore ou une clé materielle<br>
					Vous devez saisir votre mot de passe plusieurs fois pendant la
					procédure
				</small>
			</div>
		</div>
	</div>

	<main role="main" class="container"> <script
		type="text/javascript"
		src="https://ajax.microsoft.com/ajax/jquery/jquery-1.11.1.min.js">
	<!-- -->
		
	</script>
	<div class="card">
	<div class="card-header">Progression de la procédure de signature</div>
		<div class="card-body">
			<div class="progress">
				<div class="progress-bar progress-bar-striped active"
					style="width: 10%;" id="bar">
					<span id="bar-text">Loading certificates...</span>
				</div>
			</div>
			<div id="error" style="display: none" class="text-center">
			<div class="alert alert-danger" role="danger">
				<strong id="errorText">Une erreur s'est produite lors de la signature</strong>
				<br>
				<small>Erreur : <span id="errorcontent"></span></small>
				</div>
				<br>
				<a onclick="location.reload();" class="btn btn-danger btnSeccion text-white" id="btnSeccion4">
				<i class="fas fa-sync-alt fa-2x"></i><br> Relancer
							</a>
			</div>
			<div class="alert alert-success text-center" role="danger"
				id="success">
				<strong>Signature effectuée</strong>
				<br />
				<a th:href="'/user/signrequests/' + ${signRequestId}" class="btn btn-success btnSeccion" id="return2">Retour</a>
			</div>
		</div>
	</div>
	</main>
</body>
</html>
