<!doctype html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">
<!--/*@thymesVar id="signRequest" type="org.esupportail.esupsignature.entity.SignRequest"*/-->
<script th:inline="javascript" type="module">
    import {default as FilesInput} from "/static/js/modules/utils/FilesInput.js";
    new FilesInput($("#multipartFiles"), "", "multipartFiles", [[${signRequest.liteOriginalDocuments}]], true, [[${_csrf}]], [[${signRequest.id}]]);
</script>
<div class="card mb-1 col-lg-10 mx-auto" th:if="${signRequest.status != T(org.esupportail.esupsignature.entity.enums.SignRequestStatus).exported}">
    <div class="card-body">
        <h5>Liste des documents originaux</h5>
        <div th:if="${user == signRequest.createBy}">
            <div th:if="${(signRequest.status == T(org.esupportail.esupsignature.entity.enums.SignRequestStatus).draft || signRequest.status == T(org.esupportail.esupsignature.entity.enums.SignRequestStatus).completed)}">
                <div th:if="${#lists.size(signRequest.originalDocuments) == 0 || signRequest.parentSignBook.liveWorkflow.currentStep.recipients.size() == 0}">
                    <div th:if="${#lists.size(signRequest.originalDocuments) == 0}">
                        <div class="alert alert-warning" th:if="${signRequest.status == T(org.esupportail.esupsignature.entity.enums.SignRequestStatus).draft}">
                            <p>Vous devez ajouter des documents</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="file-loading">
            <input id="multipartFiles" name="multipartFiles" type="file" multiple="multiple"/>
        </div>
    </div>
</div>
<div th:replace="user/signrequests/cards/recipientscard :: recipientscard"></div>
<div th:replace="user/signrequests/cards/commentscard :: commentscard"></div>
<div th:replace="user/signrequests/cards/logscard :: logscard"></div>
<div class="col-12 text-center">
<a class="btn btn-floating bg-primary waves-effect m-1" th:href="'/user/signrequests/get-last-file/' + ${id}" target="_blank" title="Enregistrer le document signé sous">
    <i class="fas fa-download"></i>
</a>
<a title="Export SEDA" class="btn btn-floating bg-primary waves-effect m-1" th:href="'/user/signrequests/get-seda/' + ${id}">
    <i class="fas fa-file-export"></i>
</a>
<a th:if="${signRequest.status != T(org.esupportail.esupsignature.entity.enums.SignRequestStatus).exported}" class="btn btn-floating bg-primary waves-effect m-1" th:href="'/user/validation/document/' + ${id}" title="Contrôler le document">
    <i class="fas fa-shield-alt "></i>
</a>
</div>
</html>
