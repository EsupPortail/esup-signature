<!doctype html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/head :: head"></head>

<body>
<form id="wiz2Form" th:action="'/user/signrequests/wizard/wiz3/' + ${signRequest.id}">
    <div class="file-loading">
        <input id="multipartFile" name="multipartFiles" type="file" multiple="multiple"/>
    </div>
    <script>
        /*<![CDATA[*/

        function fileUpload() {
            $('#multipartFile').fileinput('upload');
        }

        $("#multipartFile").fileinput({
            language: "fr",
            showCaption: false,
            showClose: false,
            showBrowse: true,
            showUpload: false,
            showRemove: false,
            browseOnZoneClick: true,
            uploadUrl: '[['/user/signrequests/add-doc/' + ${signRequest.id} + '?' + ${_csrf.parameterName} + '=' + ${_csrf.token}]]',
            uploadAsync: false,
            overwriteInitial: false,
            theme: 'explorer-fas',
            pdfRendererUrl: 'http://plugins.krajee.com/pdfjs/web/viewer.html',
            preferIconicPreview: true,
            previewFileIconSettings: { // configure your icon file extensions
                'doc': '<i class="fas fa-file-word text-primary  fa-2x"></i>',
                'xls': '<i class="fas fa-file-excel text-success  fa-2x"></i>',
                'ppt': '<i class="fas fa-file-powerpoint text-danger  fa-2x"></i>',
                'pdf': '<i class="fas fa-file-pdf text-danger  fa-2x"></i>',
                'zip': '<i class="fas fa-file-archive text-muted  fa-2x"></i>',
                'htm': '<i class="fas fa-file-code text-info  fa-2x"></i>',
                'txt': '<i class="fas fa-file-alt text-info fa-2x"></i>',
                'mov': '<i class="fas fa-file-video text-warning fa-2x"></i>',
                'mp3': '<i class="fas fa-file-audio text-warning  fa-2x"></i>',
                'jpg': '<i class="fas fa-file-image text-danger fa-2x"></i>',
                'gif': '<i class="fas fa-file-image text-muted fa-2x"></i>',
                'png': '<i class="fas fa-file-image text-primary fa-2x"></i>'
            },

        });

        $('#multipartFile').on('filebatchuploadsuccess', function(event, previewId, index, fileId) {
            $('#wiz2Form').submit();
        });

        /*]]>*/
    </script>
    <button type="button" onclick="fileUpload();" id="register-form-submit" class="btn btn-success" style="position: absolute;right: 10px;bottom: 10px;">
        Suivant <i class="fas fa-angle-right"></i>
    </button>
</form>
</body>
</html>
